# Integration Data Flow Diagram

**Date:** February 16, 2026  
**Purpose:** Visual representation of data flow and integration points

---

## ğŸ”„ COMPLETE DATA FLOW

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         FRONTEND LAYER                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚   React      â”‚    â”‚   Services   â”‚    â”‚    Types     â”‚    â”‚
â”‚  â”‚  Components  â”‚â”€â”€â”€â–¶â”‚  (API calls) â”‚â”€â”€â”€â–¶â”‚ (TypeScript) â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚         â”‚                    â”‚                    â”‚            â”‚
â”‚         â”‚                    â”‚                    â”‚            â”‚
â”‚         â–¼                    â–¼                    â–¼            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚              API Client (Axios)                      â”‚    â”‚
â”‚  â”‚  - baseURL: http://localhost:3000                    â”‚    â”‚
â”‚  â”‚  - JWT token in headers                              â”‚    â”‚
â”‚  â”‚  - Request/Response interceptors                     â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                           â”‚                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â”‚ HTTP/WebSocket
                            â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           â–¼                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚              NestJS Backend                          â”‚    â”‚
â”‚  â”‚  - Controllers (REST endpoints)                      â”‚    â”‚
â”‚  â”‚  - Services (Business logic)                         â”‚    â”‚
â”‚  â”‚  - Guards (Authentication)                           â”‚    â”‚
â”‚  â”‚  - DTOs (Validation)                                 â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                           â”‚                                    â”‚
â”‚                           â–¼                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚              TypeORM Entities                        â”‚    â”‚
â”‚  â”‚  - User, Profile, Match, Connection, etc.            â”‚    â”‚
â”‚  â”‚  - Relations, Transformers, Validators               â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                           â”‚                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â”‚ SQL Queries
                            â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           â–¼                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚           PostgreSQL Database                        â”‚    â”‚
â”‚  â”‚  - Tables (users, profiles, matches, etc.)           â”‚    â”‚
â”‚  â”‚  - Constraints, Indexes, Triggers                    â”‚    â”‚
â”‚  â”‚  - JSONB columns for complex data                    â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”´ CRITICAL INTEGRATION POINTS

### 1. Authentication Flow

```
Frontend                Backend                 Database
â”€â”€â”€â”€â”€â”€â”€â”€                â”€â”€â”€â”€â”€â”€â”€                 â”€â”€â”€â”€â”€â”€â”€â”€

LoginForm
   â”‚
   â”œâ”€â–¶ POST /auth/login
   â”‚      â”‚
   â”‚      â”œâ”€â–¶ AuthService.validateUser()
   â”‚      â”‚      â”‚
   â”‚      â”‚      â””â”€â–¶ SELECT * FROM users WHERE email = ?
   â”‚      â”‚             â”‚
   â”‚      â”‚             â””â”€â–¶ User found
   â”‚      â”‚
   â”‚      â”œâ”€â–¶ Generate JWT token
   â”‚      â”‚
   â”‚      â””â”€â–¶ Return { token, user }
   â”‚
   â””â”€â–¶ Store token in localStorage
       â”‚
       â””â”€â–¶ Set Authorization header
```

**Issues:**
- âŒ Backend returns 'token', frontend expects 'access_token'
- âœ… Fixed with workaround in auth.service.ts

---

### 2. Profile Data Flow

```
Frontend                Backend                 Database
â”€â”€â”€â”€â”€â”€â”€â”€                â”€â”€â”€â”€â”€â”€â”€                 â”€â”€â”€â”€â”€â”€â”€â”€

ProfileEdit
   â”‚
   â”œâ”€â–¶ PUT /auth/profile
   â”‚      â”‚
   â”‚      â”œâ”€â–¶ AuthService.updateProfile()
   â”‚      â”‚      â”‚
   â”‚      â”‚      â”œâ”€â–¶ UPDATE users SET avatarUrl = ?
   â”‚      â”‚      â”‚
   â”‚      â”‚      â”œâ”€â–¶ UPDATE influencer_profiles SET ... âŒ ISSUE
   â”‚      â”‚      â”‚   (or company_profiles)
   â”‚      â”‚      â”‚
   â”‚      â”‚      â””â”€â–¶ Profile updated
   â”‚      â”‚
   â”‚      â””â”€â–¶ Return updated profile
   â”‚
   â””â”€â–¶ Update UI

ISSUE: Avatar stored in 3 places
- users.avatarUrl
- influencer_profiles.avatarUrl  âŒ Duplicate
- company_profiles.avatarUrl     âŒ Duplicate

FIX: Use only users.avatarUrl
```

---

### 3. Matching Flow

```
Frontend                Backend                 Database
â”€â”€â”€â”€â”€â”€â”€â”€                â”€â”€â”€â”€â”€â”€â”€                 â”€â”€â”€â”€â”€â”€â”€â”€

MatchesPage
   â”‚
   â”œâ”€â–¶ GET /matches?filters=...
   â”‚      â”‚
   â”‚      â”œâ”€â–¶ MatchingService.getMatches()
   â”‚      â”‚      â”‚
   â”‚      â”‚      â”œâ”€â–¶ SELECT * FROM matches
   â”‚      â”‚      â”‚   WHERE userId = ?
   â”‚      â”‚      â”‚
   â”‚      â”‚      â”œâ”€â–¶ Calculate scores
   â”‚      â”‚      â”‚
   â”‚      â”‚      â””â”€â–¶ Return matches
   â”‚      â”‚
   â”‚      â””â”€â–¶ Return {
   â”‚            id,
   â”‚            user: {...},      âŒ ISSUE: Should be 'profile'
   â”‚            score,
   â”‚            factors: {...}    âŒ ISSUE: Should be 'breakdown'
   â”‚          }
   â”‚
   â””â”€â–¶ Transform response âŒ UNNECESSARY
       â”‚
       â””â”€â–¶ Display matches

FIX: Backend should return correct structure
```

---

### 4. Messaging Flow

```
Frontend                Backend                 Database
â”€â”€â”€â”€â”€â”€â”€â”€                â”€â”€â”€â”€â”€â”€â”€                 â”€â”€â”€â”€â”€â”€â”€â”€

MessageThread
   â”‚
   â”œâ”€â–¶ GET /messaging/conversations/:id/messages
   â”‚      â”‚
   â”‚      â”œâ”€â–¶ MessagingService.getMessages()
   â”‚      â”‚      â”‚
   â”‚      â”‚      â”œâ”€â–¶ SELECT * FROM messages
   â”‚      â”‚      â”‚   WHERE conversationId = ?
   â”‚      â”‚      â”‚   JOIN users ON messages.senderId = users.id
   â”‚      â”‚      â”‚
   â”‚      â”‚      â””â”€â–¶ Return messages with sender
   â”‚      â”‚
   â”‚      â””â”€â–¶ Return {
   â”‚            sender: {
   â”‚              id,
   â”‚              name,          âŒ ISSUE: Frontend expects
   â”‚              avatarUrl         profile.fullName
   â”‚            }
   â”‚          }
   â”‚
   â””â”€â–¶ Display messages (sender name undefined) âŒ

FIX: Frontend should expect flat sender.name
```

---

### 5. Collaboration Request Flow

```
Frontend                Backend                 Database
â”€â”€â”€â”€â”€â”€â”€â”€                â”€â”€â”€â”€â”€â”€â”€                 â”€â”€â”€â”€â”€â”€â”€â”€

CollaborationModal
   â”‚
   â”œâ”€â–¶ POST /collaboration-requests
   â”‚      {
   â”‚        recipientId,
   â”‚        message,
   â”‚        budgetMin,        âŒ ISSUE: Flat structure
   â”‚        budgetMax,
   â”‚        timeline,
   â”‚        ...
   â”‚      }
   â”‚      â”‚
   â”‚      â”œâ”€â–¶ MatchingController.createCollaborationRequest()
   â”‚      â”‚      â”‚
   â”‚      â”‚      â”œâ”€â–¶ Wrap into collaborationRequestData âœ…
   â”‚      â”‚      â”‚
   â”‚      â”‚      â””â”€â–¶ MatchingService.createConnection()
   â”‚      â”‚             â”‚
   â”‚      â”‚             â””â”€â–¶ INSERT INTO connections
   â”‚      â”‚                 (collaboration_request_data)
   â”‚      â”‚                 VALUES (jsonb)
   â”‚      â”‚
   â”‚      â””â”€â–¶ Return connection
   â”‚
   â””â”€â–¶ Display success

FIX: Backend controller wraps flat DTO into nested structure
```

---

## ğŸ“Š DATA STRUCTURE MAPPING

### User Profile Structure

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      DATABASE                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  users                    influencer_profiles               â”‚
â”‚  â”œâ”€ id                    â”œâ”€ id                             â”‚
â”‚  â”œâ”€ email                 â”œâ”€ userId (FK)                    â”‚
â”‚  â”œâ”€ role                  â”œâ”€ name                           â”‚
â”‚  â”œâ”€ avatarUrl âœ…          â”œâ”€ avatarUrl âŒ DUPLICATE         â”‚
â”‚  â””â”€ ...                   â”œâ”€ niche                          â”‚
â”‚                           â”œâ”€ audienceSize                   â”‚
â”‚                           â”œâ”€ platforms (JSONB)              â”‚
â”‚                           â”œâ”€ engagementRate (DECIMAL)       â”‚
â”‚                           â””â”€ ...                            â”‚
â”‚                                                             â”‚
â”‚  company_profiles                                           â”‚
â”‚  â”œâ”€ id                                                      â”‚
â”‚  â”œâ”€ userId (FK)                                             â”‚
â”‚  â”œâ”€ companyName âŒ ISSUE: Should be 'name'                 â”‚
â”‚  â”œâ”€ avatarUrl âŒ DUPLICATE                                  â”‚
â”‚  â”œâ”€ industry                                                â”‚
â”‚  â”œâ”€ budget                                                  â”‚
â”‚  â””â”€ ...                                                     â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    BACKEND ENTITY                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  User                     InfluencerProfile                 â”‚
â”‚  â”œâ”€ id                    â”œâ”€ id                             â”‚
â”‚  â”œâ”€ email                 â”œâ”€ userId                         â”‚
â”‚  â”œâ”€ role                  â”œâ”€ name                           â”‚
â”‚  â”œâ”€ avatarUrl             â”œâ”€ avatarUrl âŒ                   â”‚
â”‚  â””â”€ ...                   â”œâ”€ niche                          â”‚
â”‚                           â”œâ”€ audienceSize                   â”‚
â”‚                           â”œâ”€ platforms: string[]            â”‚
â”‚                           â”œâ”€ engagementRate: number         â”‚
â”‚                           â””â”€ ...                            â”‚
â”‚                                                             â”‚
â”‚  CompanyProfile                                             â”‚
â”‚  â”œâ”€ id                                                      â”‚
â”‚  â”œâ”€ userId                                                  â”‚
â”‚  â”œâ”€ companyName âŒ Maps to 'name' in response              â”‚
â”‚  â”œâ”€ avatarUrl âŒ                                            â”‚
â”‚  â”œâ”€ industry                                                â”‚
â”‚  â”œâ”€ budget                                                  â”‚
â”‚  â””â”€ ...                                                     â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   BACKEND RESPONSE                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  {                                                          â”‚
â”‚    id,                                                      â”‚
â”‚    email,                                                   â”‚
â”‚    role,                                                    â”‚
â”‚    name,              âœ… Mapped from companyName           â”‚
â”‚    avatarUrl,         âœ… From users table                  â”‚
â”‚    type,              âœ… Derived from role                 â”‚
â”‚    ...profileFields                                         â”‚
â”‚  }                                                          â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   FRONTEND TYPE                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  interface Profile {                                        â”‚
â”‚    id: string;                                              â”‚
â”‚    userId: string;                                          â”‚
â”‚    type: 'influencer' | 'company';                          â”‚
â”‚    name: string;        âœ… Expects unified 'name'          â”‚
â”‚    avatarUrl?: string;                                      â”‚
â”‚    ...                                                      â”‚
â”‚  }                                                          â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ CONNECTION STATUS FLOW

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    CURRENT (BROKEN)                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  Database Enum:                                             â”‚
â”‚  â”œâ”€ 'pending'                                               â”‚
â”‚  â”œâ”€ 'connected'  âŒ Duplicate                               â”‚
â”‚  â”œâ”€ 'accepted'   âŒ Duplicate                               â”‚
â”‚  â””â”€ 'rejected'                                              â”‚
â”‚                                                             â”‚
â”‚  Backend Entity:                                            â”‚
â”‚  â”œâ”€ PENDING = 'pending'                                     â”‚
â”‚  â”œâ”€ CONNECTED = 'connected'  âŒ                             â”‚
â”‚  â”œâ”€ ACCEPTED = 'accepted'    âŒ                             â”‚
â”‚  â””â”€ REJECTED = 'rejected'                                   â”‚
â”‚                                                             â”‚
â”‚  Frontend:                                                  â”‚
â”‚  â”œâ”€ Uses both 'connected' and 'accepted' âŒ                â”‚
â”‚  â””â”€ Inconsistent checks                                     â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼ FIX
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     FIXED (CORRECT)                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  Database Enum:                                             â”‚
â”‚  â”œâ”€ 'pending'                                               â”‚
â”‚  â”œâ”€ 'accepted'   âœ… Single status                          â”‚
â”‚  â””â”€ 'rejected'                                              â”‚
â”‚                                                             â”‚
â”‚  Backend Entity:                                            â”‚
â”‚  â”œâ”€ PENDING = 'pending'                                     â”‚
â”‚  â”œâ”€ ACCEPTED = 'accepted'  âœ…                               â”‚
â”‚  â””â”€ REJECTED = 'rejected'                                   â”‚
â”‚                                                             â”‚
â”‚  Frontend:                                                  â”‚
â”‚  â”œâ”€ Uses only 'accepted' âœ…                                â”‚
â”‚  â””â”€ Consistent checks                                       â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“¦ JSONB DATA STORAGE

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  JSONB COLUMNS                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  influencer_profiles.platforms                              â”‚
â”‚  â”œâ”€ Database: JSONB                                         â”‚
â”‚  â”œâ”€ TypeORM: string[]                                       â”‚
â”‚  â””â”€ Needs: Transformer âœ…                                   â”‚
â”‚                                                             â”‚
â”‚  company_profiles.platforms                                 â”‚
â”‚  â”œâ”€ Database: JSONB                                         â”‚
â”‚  â”œâ”€ TypeORM: string[]                                       â”‚
â”‚  â””â”€ Needs: Transformer âœ…                                   â”‚
â”‚                                                             â”‚
â”‚  connections.collaboration_request_data                     â”‚
â”‚  â”œâ”€ Database: JSONB                                         â”‚
â”‚  â”œâ”€ TypeORM: CollaborationRequestData                      â”‚
â”‚  â””â”€ Works: Native JSONB support âœ…                          â”‚
â”‚                                                             â”‚
â”‚  feed_posts.mediaUrls                                       â”‚
â”‚  â”œâ”€ Database: simple-array âŒ ISSUE                        â”‚
â”‚  â”œâ”€ TypeORM: string[]                                       â”‚
â”‚  â””â”€ Fix: Change to JSONB âœ…                                â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ” AUTHENTICATION FLOW

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                             â”‚
â”‚  1. User Login                                              â”‚
â”‚     â”‚                                                       â”‚
â”‚     â”œâ”€â–¶ POST /auth/login { email, password }              â”‚
â”‚     â”‚                                                       â”‚
â”‚     â””â”€â–¶ Response: { token: "jwt..." } âŒ Should be         â”‚
â”‚                    { access_token: "jwt..." }              â”‚
â”‚                                                             â”‚
â”‚  2. Store Token                                             â”‚
â”‚     â”‚                                                       â”‚
â”‚     â””â”€â–¶ localStorage.setItem('token', token)               â”‚
â”‚                                                             â”‚
â”‚  3. Subsequent Requests                                     â”‚
â”‚     â”‚                                                       â”‚
â”‚     â”œâ”€â–¶ Headers: { Authorization: "Bearer jwt..." }        â”‚
â”‚     â”‚                                                       â”‚
â”‚     â””â”€â–¶ Backend validates JWT                              â”‚
â”‚         â”‚                                                   â”‚
â”‚         â”œâ”€â–¶ Extract userId from token                      â”‚
â”‚         â”‚                                                   â”‚
â”‚         â””â”€â–¶ Attach user to request                         â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ INTEGRATION POINTS SUMMARY

| Integration Point | Status | Issue | Fix Priority |
|------------------|--------|-------|--------------|
| Auth token field | âš ï¸ | 'token' vs 'access_token' | LOW (workaround exists) |
| Profile name | ğŸ”´ | 'companyName' vs 'name' | CRITICAL |
| Avatar storage | ğŸ”´ | Triple storage | CRITICAL |
| Connection status | ğŸ”´ | Duplicate enum values | CRITICAL |
| Match response | ğŸ”´ | 'user' vs 'profile' | CRITICAL |
| Message sender | ğŸ”´ | Nested vs flat | CRITICAL |
| Collaboration data | ğŸ”´ | Flat vs nested | CRITICAL |
| Platform JSONB | ğŸ”´ | No transformer | CRITICAL |
| Engagement rate | ğŸ”´ | String vs number | CRITICAL |
| Media URLs | âš ï¸ | simple-array vs JSONB | HIGH |
| Last message | âš ï¸ | Missing field | HIGH |
| Error responses | âš ï¸ | Inconsistent format | HIGH |

---

## ğŸ“ˆ DATA FLOW OPTIMIZATION

### Before Optimization:
```
Frontend â”€â”€â–¶ Backend â”€â”€â–¶ Transform â”€â”€â–¶ Database
   â”‚            â”‚            â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â–¶ Multiple transformations âŒ
```

### After Optimization:
```
Frontend â”€â”€â–¶ Backend â”€â”€â–¶ Database
   â”‚            â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â–¶ Direct mapping âœ…
```

---

## âœ… SUCCESS CRITERIA

- [ ] No data transformation in frontend services
- [ ] Consistent field names across all layers
- [ ] Single source of truth for each data point
- [ ] All JSONB fields have transformers
- [ ] All enums are consistent
- [ ] All date fields serialize correctly
- [ ] All relations load correctly
- [ ] No undefined property errors

---

**Use this diagram to understand data flow and identify integration issues!**
